# Maintenance Agent Configuration
# Defines sources to monitor and target repositories to maintain

# Projects to maintain
target_repos:
  - owner: unicorncomfyui
    repo: serverless_runpod
    description: "RunPod Serverless ComfyUI"

  - owner: unicorncomfyui
    repo: pod-comfyui-vscode
    description: "RunPod Pod with ComfyUI + VSCode"

# Sources to monitor
sources:
  # Critical dependencies
  github_repos:
    - owner: comfyanonymous
      repo: ComfyUI
      description: "ComfyUI main repository"
      priority: high
      watch_for: [releases, tags]

    - owner: thu-ml
      repo: SageAttention
      description: "SageAttention optimized attention"
      priority: high
      watch_for: [releases, tags, commits]

    - owner: pytorch
      repo: pytorch
      description: "PyTorch framework"
      priority: critical
      watch_for: [releases]

    - owner: runpod
      repo: runpod-python
      description: "RunPod Python SDK & platform updates"
      priority: critical
      watch_for: [releases, tags]

    # Popular custom nodes (from ComfyUI Manager)
    - owner: ltdrdata
      repo: ComfyUI-Manager
      description: "ComfyUI Manager"
      priority: high
      watch_for: [releases]

    # Critical custom nodes (video/heavy usage)
    - owner: Kosinkadink
      repo: ComfyUI-VideoHelperSuite
      description: "Video Helper Suite (video generation)"
      priority: high
      watch_for: [releases, tags]

    - owner: Fannovel16
      repo: ComfyUI-Frame-Interpolation
      description: "Frame Interpolation (video)"
      priority: high
      watch_for: [releases, tags]

    - owner: ltdrdata
      repo: ComfyUI-Impact-Pack
      description: "Impact Pack (workflows)"
      priority: high
      watch_for: [releases]

    - owner: ltdrdata
      repo: ComfyUI-Impact-Subpack
      description: "Impact Subpack (dependencies)"
      priority: high
      watch_for: [releases]

    # Important custom nodes (widely used)
    - owner: rgthree
      repo: rgthree-comfy
      description: "rgthree's ComfyUI nodes"
      priority: medium
      watch_for: [releases]

    - owner: kijai
      repo: ComfyUI-KJNodes
      description: "KJ Nodes collection"
      priority: medium
      watch_for: [releases]

    - owner: cubiq
      repo: ComfyUI_essentials
      description: "ComfyUI Essentials"
      priority: medium
      watch_for: [releases]

    - owner: WASasquatch
      repo: was-node-suite-comfyui
      description: "WAS Node Suite"
      priority: medium
      watch_for: [releases]

    - owner: Suzie1
      repo: ComfyUI_Comfyroll_CustomNodes
      description: "Comfyroll Custom Nodes"
      priority: medium
      watch_for: [releases]

    - owner: ssitu
      repo: ComfyUI_UltimateSDUpscale
      description: "Ultimate SD Upscale"
      priority: medium
      watch_for: [releases]

    # Additional custom nodes (lighter usage)
    - owner: theUpsider
      repo: ComfyUI-Logic
      description: "Logic nodes"
      priority: low
      watch_for: [releases]

    - owner: chrisgoringe
      repo: cg-use-everywhere
      description: "Use Everywhere nodes"
      priority: low
      watch_for: [releases]

    - owner: bash-j
      repo: mikey_nodes
      description: "Mikey Nodes"
      priority: low
      watch_for: [releases]

    - owner: yolain
      repo: ComfyUI-Easy-Use
      description: "Easy Use nodes"
      priority: low
      watch_for: [releases]

    # Temporarily disabled - requires opencv-contrib
    # - owner: chflame163
    #   repo: ComfyUI_LayerStyle
    #   description: "Layer Style nodes"
    #   priority: low
    #   watch_for: [releases]

    - owner: shadowcz007
      repo: comfyui-mixlab-nodes
      description: "Mixlab nodes"
      priority: low
      watch_for: [releases]

    - owner: Jonseed
      repo: ComfyUI-Detail-Daemon
      description: "Detail Daemon"
      priority: low
      watch_for: [releases]

  # Reddit sources
  reddit_subreddits:
    - subreddit: StableDiffusion
      description: "Stable Diffusion community updates"
      priority: medium
      filters:
        flairs: ["Release", "News", "Tools"]
        keywords: ["ComfyUI", "update", "release", "new version", "v0.", "v1.", "v2."]
      max_posts: 20

# Monitoring settings
monitoring:
  # How often to check (for scheduled runs)
  check_interval: daily

  # Analysis thresholds
  thresholds:
    min_priority_score: 4  # 0-10 scale (minimum to create issue)
    min_priority_for_pr: 6  # Minimum priority to create PR automatically
    auto_create_issue: true
    auto_create_pr: true  # Phase 2 - Enable automatic PR creation

    # PR creation rules
    create_pr_for:
      - UPDATE  # Create PR for safe updates
      - EVALUATE  # Create PR for updates that need evaluation
      # BLOCK recommendations will only get issues, never PRs

  # Notification channels
  notifications:
    github_issues: true
    discord_webhook: false  # Optional
    email: false  # Optional

# Claude API settings
claude:
  model: "claude-sonnet-4-5-20250929"
  max_tokens: 1000
  temperature: 0.3  # Lower for more consistent analysis
